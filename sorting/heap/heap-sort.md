# 堆排序（Heapsort）

指利用堆这种数据结构所设计的一种排序算法。堆积是一个近似完全二叉树的结构，并同时满足堆积的性质：即子结点的键值或索引总是小于（或者大于）它的父节点。

# 堆节点的访问

通常堆是通过一维数组来实现的。在数组起始位置为0的情形中：
* 父节点i的左子节点在位置(2*i+1);
* 父节点i的右子节点在位置(2*i+2);
* 子节点i的父节点在位置floor((i-1)/2)。

# 堆的操作

在堆的数据结构中，堆中的最大值总是位于根节点(在优先队列中使用堆的话堆中的最小值位于根节点)。堆中定义以下几种操作：
* 最大堆调整（Max\_Heapify）：将堆的末端子节点作调整，使得子节点永远小于父节点
* 创建最大堆（Build\_Max\_Heap）：将堆所有数据重新排序
* 堆排序（HeapSort）：移除位在第一个数据的根节点，并做最大堆调整的递归运算

# 原地堆排序

基于以上堆相关的操作，我们可以很容易的定义堆排序。

例如，假设我们已经读入一系列数据并创建了一个堆，一个最直观的算法就是反复的调用del\_max()函数，因为该函数总是能够返回堆中最大的值，然后把它从堆中删除，从而对这一系列返回值的输出就得到了该序列的降序排列。真正的原地堆排序使用了另外一个小技巧。堆排序的过程是：

1. 创建一个堆H[0..n-1]；
2. 把堆首（最大值）和堆尾互换；
3. 把堆的尺寸缩小1，并调用shift\_down(0),目的是把新的数组顶端数据调整到相应位置；
4. 重复步骤2，直到堆的尺寸为1。

# 参考

1. [常见排序算法 - 堆排序 (Heap Sort)](http://bubkoo.com/2014/01/14/sort-algorithm/heap-sort/)
